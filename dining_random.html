<!DOCTYPE html>
<html>
<head>
	<link href="css/dining.css" rel="stylesheet" />
</head>
<body background='https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ6ZDLP5y1ubzfK6D-pNI1OHAl31fdiWwMd_kBF1N4t6OQn7zKH&usqp=CAU'>
    <div id="fullpage">
	
	<center><h1><b><i><u> Dining Philosopher </b></i></u></h1></center>
	
		<div class="section" >
			<div class="container" id="anim">

				<button type="button" class="next btn btn-success btn-lg" onclick="simulate()">Next</button>

				<div>
					<img id="phil1" src="includes/dining_items/thinking.gif" >
					<img id="phil2" src="includes/dining_items/thinking.gif" >
					<img id="phil3" src="includes/dining_items/thinking.gif" >
					<img id="phil4" src="includes/dining_items/thinking.gif" >
					<img id="phil5" src="includes/dining_items/thinking.gif" >
				</div>

		
				<div id="p1"> <font color="black">Philosopher 1</font></div>
				<div id="p2"><font color="black">Philosopher 2</font></div>
				<div id="p3"><font color="black">Philosopher 3</font></div>
				<div id="p4"><font color="black">Philosopher 4</font></div>
				<div id="p5"><font color="black">Philosopher 5</font></div>

				<div id="random"><font color="black">Random number generated : 0</font></div>

				<p id="ph1">Thinking</p>
				<p id="ph2">Thinking</p>
				<p id="ph3">Thinking</p>
				<p id="ph4">Thinking</p>
				<p id="ph5">Thinking</p>
			</div>
		</div>
			<div class="container">
				<table class="table-striped" id="chopsticktable">
 <thead class="thead-dark">
    <tr>
      <th scope="col" class="chopstickrow"><font color="black">Spoon</font></th>
      <th scope="col" class="chopstickrow" ><font color="black">Status</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row" class="chopstickrow"><font color="black">Spoon1</font></th>
      <td class="chopstickrow" id ="sp1">Unlocked</td>
    </tr>
    <tr>
			<th scope="row" class="chopstickrow"><font color="black">Spoon2</font></th>
      <td class="chopstickrow" id ="sp2">Unlocked</td>
    </tr>
    <tr>
			<th scope="row" class="chopstickrow"><font color="black">Spoon3</font></th>
      <td class="chopstickrow" id ="sp3">Unlocked</td>
    </tr>
		<tr>
			<th scope="row" class="chopstickrow"><font color="black">Spoon4</font></th>
      <td class="chopstickrow" id ="sp4">Unlocked</td>
    </tr>
		<tr>
			<th scope="row" class="chopstickrow"><font color="black">Spoon5</font></th>
			<td class="chopstickrow" id ="sp0">Unlocked</td>
		</tr>
  </tbody>
</table>
</div>

	<script>
		var phil = [0,0,0,0,0], chopsticks = [0,0,0,0,0];
		function simulate()
		{
			var n = Math.floor((Math.random() * 5) + 1);
			document.getElementById("random").innerHTML = "Random number generated : "+n;
			if(phil[n-1]==0)
			{
				phil[n-1] = 1;
				document.getElementById("phil"+n).src = "includes/dining_items/hungry.jpg";
				document.getElementById("ph"+n).innerHTML = "Hungry";
			}
			else if(phil[n-1]==1)
			{
				if(chopsticks[n-1]==0 && chopsticks[n%5]==0)
				{
					chopsticks[n-1]=1;
					chopsticks[n%5]=1;
					phil[n-1] = 2;
					document.getElementById("phil"+n).src = "includes/dining_items/eating.gif";
					document.getElementById("ph"+n).innerHTML = "Eating";
					document.getElementById("sp"+(n+1)%5).innerHTML = "Locked";
					document.getElementById("sp"+(n)%5).innerHTML = "Locked";
				}
				else
				{
					alert("Philosopher " + n + " cannot eat now!");
				}
			}
			else if(phil[n-1]==2)
			{
					chopsticks[n-1]=0;
					chopsticks[n%5]=0;
					phil[n-1] = 0;
					document.getElementById("phil"+n).src = "includes/dining_items/thinking.gif";
					
					document.getElementById("ph"+n).innerHTML = "Thinking";
					document.getElementById("sp"+n%5).innerHTML = "Unlocked";
					document.getElementById("sp"+(n+1)%5).innerHTML = "Unlocked";
			}
		}
	</script>

</body>

</html>
